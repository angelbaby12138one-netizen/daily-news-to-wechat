# 详细使用步骤

## 前置准备

你需要：
1. 一个 GitHub 账号
2. 微信（用于接收推送）
3. 5 分钟时间

---

## 第 1 步：获取推送密钥（2分钟）

### 方法 A：PushPlus（推荐）

1. 用浏览器打开：http://www.pushplus.plus/
2. 点击「微信扫码登录」
3. 用微信扫描二维码，关注公众号
4. 登录后，在首页复制你的 **Token**（类似：`abc123def456...`）
5. 保存这个 Token，待会要用

### 方法 B：Server酱

1. 用浏览器打开：https://sct.ftqq.com/
2. 点击「GitHub 登录」
3. 登录后，点击「微信绑定」，扫码绑定
4. 在「SendKey」页面复制你的 **SendKey**
5. 保存这个 SendKey，待会要用

---

## 第 2 步：上传项目到 GitHub（3分钟）

### 2.1 在 GitHub 创建仓库

1. 打开 https://github.com/new
2. Repository name 填写：`daily-news-to-wechat`
3. 选择 **Public**（公开仓库，免费无限制运行）
4. 不要勾选任何选项
5. 点击「Create repository」

### 2.2 上传代码

打开命令行（终端/PowerShell），执行：

```bash
# 进入项目目录
cd C:\Users\KK~\daily-news-to-wechat

# 初始化 Git
git init

# 添加所有文件
git add .

# 提交
git commit -m "Initial commit: 每日新闻推送"

# 设置主分支
git branch -M main

# 关联远程仓库（替换成你的 GitHub 用户名）
git remote add origin https://github.com/你的用户名/daily-news-to-wechat.git

# 推送到 GitHub
git push -u origin main
```

**注意：** 把上面的 `你的用户名` 替换成你的 GitHub 用户名！

如果 git push 要求登录：
- Windows: 会弹出登录窗口
- Mac/Linux: 需要使用 Personal Access Token

---

## 第 3 步：配置 GitHub Secrets（1分钟）

1. 在 GitHub 上打开你刚创建的仓库
2. 点击上方的 **Settings** 标签
3. 左侧菜单找到 **Secrets and variables** → **Actions**
4. 点击 **New repository secret** 按钮

### 添加第一个密钥：

- **Name**: `PUSH_KEY`
- **Secret**: 粘贴你在第1步获取的 Token 或 SendKey
- 点击 **Add secret**

### 添加第二个密钥（可选）：

- **Name**: `PUSH_TYPE`
- **Secret**: 如果用 PushPlus 填 `pushplus`，如果用 Server酱 填 `serverchan`
- 点击 **Add secret**

**注意：** 如果不添加 PUSH_TYPE，默认使用 PushPlus

---

## 第 4 步：启用并测试（1分钟）

### 4.1 启用 GitHub Actions

1. 点击仓库上方的 **Actions** 标签
2. 如果看到提示，点击 **I understand my workflows, go ahead and enable them**

### 4.2 手动测试运行

1. 在 Actions 页面，左侧点击 **每日新闻推送**
2. 右侧点击 **Run workflow** 按钮
3. 在弹出的菜单中，再次点击绿色的 **Run workflow** 按钮
4. 等待 1-2 分钟，查看运行状态

### 4.3 检查是否成功

- ✅ 如果显示绿色对勾，说明成功！检查微信是否收到推送
- ❌ 如果显示红色叉，点击进去查看日志，看哪里出错了

---

## 完成！

现在你的新闻推送已经设置完成：
- **每天早上 8:00** 会自动推送新闻到微信
- **每天晚上 8:00** 会自动推送新闻到微信

---

## 常见问题

### Q1: 我没有收到推送？

**检查清单：**
1. GitHub Actions 是否运行成功（绿色对勾）？
2. PUSH_KEY 是否配置正确？
3. 推送服务的微信是否绑定成功？
4. 如果用 PushPlus，检查公众号消息
5. 如果用 Server酱，检查服务号消息

### Q2: 不会用 Git 怎么办？

**简单方法：**
1. 在 GitHub 上创建仓库
2. 点击「Upload files」
3. 把项目文件夹里的所有文件拖进去
4. 点击「Commit changes」

### Q3: 如何修改推送时间？

编辑 `.github/workflows/daily-news.yml` 文件：

```yaml
schedule:
  # 修改这两行的时间
  - cron: '0 0 * * *'   # 早上 8:00 (UTC 0:00)
  - cron: '0 12 * * *'  # 晚上 8:00 (UTC 12:00)
```

**时间对照表：**
- 北京时间 07:00 → `0 23 * * *`
- 北京时间 08:00 → `0 0 * * *`
- 北京时间 12:00 → `0 4 * * *`
- 北京时间 18:00 → `0 10 * * *`
- 北京时间 20:00 → `0 12 * * *`
- 北京时间 22:00 → `0 14 * * *`

公式：**UTC 时间 = 北京时间 - 8**

### Q4: 可以本地测试吗？

可以！

```bash
# 安装 Python 依赖
pip install -r requirements.txt

# Windows PowerShell 设置环境变量
$env:PUSH_TYPE="pushplus"
$env:PUSH_KEY="你的Token"
python news_fetcher.py

# Mac/Linux 设置环境变量
export PUSH_TYPE="pushplus"
export PUSH_KEY="你的Token"
python news_fetcher.py
```

### Q5: 如何停止推送？

**方法 1：** 禁用 workflow
- 进入 Actions → 每日新闻推送 → 点击右上角 ··· → Disable workflow

**方法 2：** 删除仓库
- Settings → 滚动到最下方 → Delete this repository

### Q6: 如何自定义新闻内容？

编辑 `news_fetcher.py`，在这两个函数里修改：
- `fetch_hot_news()` - 修改热点新闻来源
- `fetch_tech_news()` - 修改科技新闻来源
- `format_message()` - 修改消息格式

---

## 需要帮助？

1. 查看 Actions 运行日志（点击失败的运行记录）
2. 检查 PUSH_KEY 和 PUSH_TYPE 是否正确
3. 确认推送服务绑定状态
