# 每日新闻自动推送 - 部署指南

## 📋 准备工作

在开始之前，确保你有：
- ✅ GitHub 账号
- ✅ PushPlus Token: `dea6cc943ca742e1b2c9d49d896b9cc1`
- ✅ 本地代码已经测试成功

---

## 🚀 第一步：创建 GitHub 仓库

### 1. 在 GitHub 创建新仓库

1. 打开浏览器，访问：https://github.com/new
2. 填写以下信息：
   - **Repository name**：`daily-news-to-wechat`
   - **Description**：每日新闻自动推送到微信
   - **可见性**：选择 **Public**（公开仓库免费使用 Actions）
   - **不要勾选**任何初始化选项（README、.gitignore、License）
3. 点击 **Create repository**

---

## 📤 第二步：上传代码到 GitHub

### 方法 A：使用命令行（推荐）

打开命令行（PowerShell 或 CMD），执行以下命令：

```bash
# 进入项目目录
cd C:\Users\KK~\daily-news-to-wechat

# 初始化 Git 仓库
git init

# 添加所有文件
git add .

# 创建第一次提交
git commit -m "初始化：每日新闻自动推送"

# 设置主分支为 main
git branch -M main

# 关联远程仓库（替换成你的 GitHub 用户名）
git remote add origin https://github.com/你的用户名/daily-news-to-wechat.git

# 推送到 GitHub
git push -u origin main
```

**⚠️ 重要：**
- 把 `你的用户名` 替换成你的 GitHub 用户名
- 如果提示输入账号密码，需要使用 GitHub Personal Access Token

### 方法 B：使用网页上传（简单）

如果不熟悉命令行：

1. 在 GitHub 仓库页面，点击 **uploading an existing file**
2. 拖拽以下文件到上传区域：
   - `news_fetcher.py`
   - `requirements.txt`
   - `.gitignore`
   - `.github/workflows/daily-news.yml`（需要保持目录结构）
   - `README.md`
   - 其他 .md 文档
3. 在底部输入提交信息：`初始化项目`
4. 点击 **Commit changes**

**注意：** 上传时需要保持 `.github/workflows/` 的目录结构。

---

## 🔐 第三步：配置 GitHub Secrets

### 1. 进入 Secrets 设置

1. 在 GitHub 仓库页面，点击上方的 **Settings**
2. 左侧菜单找到 **Secrets and variables**
3. 点击 **Actions**
4. 点击 **New repository secret** 按钮

### 2. 添加必需的 Secrets

#### Secret 1: PUSH_KEY（必需）

- **Name**：`PUSH_KEY`
- **Secret**：`dea6cc943ca742e1b2c9d49d896b9cc1`
- 点击 **Add secret**

#### Secret 2: PUSH_TYPE（可选）

- **Name**：`PUSH_TYPE`
- **Secret**：`pushplus`
- 点击 **Add secret**

#### Secret 3: CITY（可选）

- **Name**：`CITY`
- **Secret**：`石家庄`
- 点击 **Add secret**

### 3. 确认 Secrets

添加完成后，你应该看到 3 个 Secrets：
- ✅ PUSH_KEY
- ✅ PUSH_TYPE
- ✅ CITY

---

## ⚙️ 第四步：启用 GitHub Actions

### 1. 进入 Actions 页面

1. 在 GitHub 仓库页面，点击上方的 **Actions** 标签
2. 如果看到提示，点击 **I understand my workflows, go ahead and enable them**

### 2. 找到工作流

在左侧应该能看到：
- **每日新闻推送** 工作流

### 3. 手动测试一次

1. 点击左侧的 **每日新闻推送**
2. 右侧点击 **Run workflow** 按钮
3. 在弹出的菜单中，再次点击绿色的 **Run workflow** 按钮
4. 等待 1-2 分钟

### 4. 查看运行结果

1. 刷新页面，应该能看到一个正在运行的工作流
2. 点击进入查看详情
3. 如果显示 ✅ 绿色对勾，说明成功！
4. 如果显示 ❌ 红色叉，点击进去查看错误日志

### 5. 检查微信

打开微信，查看 **PushPlus推送加** 公众号，应该收到了新闻推送！

---

## 🕐 自动推送时间

配置完成后，GitHub Actions 会在以下时间自动运行：

- **每天早上 8:00**（北京时间）
- **每天晚上 8:00**（北京时间）

### 修改推送时间

如果需要修改时间，编辑 `.github/workflows/daily-news.yml`：

```yaml
schedule:
  - cron: '0 0 * * *'   # 早上 8:00 北京时间
  - cron: '0 12 * * *'  # 晚上 8:00 北京时间
```

**时区转换公式：** UTC 时间 = 北京时间 - 8

示例：
- 北京 07:00 → UTC 23:00（前一天）→ `0 23 * * *`
- 北京 09:00 → UTC 01:00 → `0 1 * * *`
- 北京 18:00 → UTC 10:00 → `0 10 * * *`
- 北京 21:00 → UTC 13:00 → `0 13 * * *`

---

## ✅ 验证部署成功

完成以上步骤后，验证：

1. ✅ 代码已上传到 GitHub
2. ✅ Secrets 已配置（PUSH_KEY、PUSH_TYPE、CITY）
3. ✅ Actions 已启用
4. ✅ 手动运行测试成功
5. ✅ 微信收到推送

---

## 🔧 常见问题

### Q1: 推送失败怎么办？

**步骤：**
1. 进入 Actions 页面
2. 点击失败的运行记录
3. 查看错误日志
4. 常见原因：
   - PUSH_KEY 配置错误
   - 网络问题（重新运行即可）
   - PushPlus 服务异常

### Q2: 没有收到推送？

**检查清单：**
- [ ] GitHub Actions 运行成功了吗？
- [ ] PUSH_KEY 配置正确吗？
- [ ] PushPlus 微信绑定了吗？
- [ ] 检查微信公众号消息

### Q3: 如何停止自动推送？

**方法 1：** 禁用工作流
1. Actions → 每日新闻推送
2. 点击右上角 `...` → Disable workflow

**方法 2：** 删除仓库
1. Settings → 滚动到最底部
2. Danger Zone → Delete this repository

### Q4: 想要更换城市？

1. Settings → Secrets and variables → Actions
2. 找到 `CITY`
3. 点击 Update
4. 修改为新城市名（如：北京、上海、广州）
5. 保存

### Q5: GitHub Actions 免费吗？

**是的！**
- 公开仓库：**无限制** Actions 分钟数
- 私有仓库：每月 **2000 分钟**
- 本项目每次运行约 2 分钟
- 一天 2 次，一个月约 120 分钟
- **完全够用！**

---

## 📊 推送内容

每天你会收到：

### 📱 内容模块
- 🌤️ **天气预报**（今天 + 明天）
- 🔥 **热点新闻**（百度/知乎，6条）
- 📱 **今日头条**（6条）
- 🎵 **抖音热榜**（6条）
- 💻 **科技资讯**（5条）
- 🤖 **AI 前沿**（3条）

### 🎨 设计风格
- 简洁白风格
- 苹果官网配色
- 清爽易读
- 适合移动端

---

## 🎉 完成！

现在你已经成功部署了每日新闻自动推送系统！

从明天开始：
- 🌅 **早上 8:00** 收到早间新闻
- 🌃 **晚上 8:00** 收到晚间新闻

**无需任何操作，自动推送到你的微信！**

---

## 📞 需要帮助？

- 查看项目 README.md
- 查看 功能说明.md
- 查看 QUICK_START.md
- GitHub Issues

**祝你每天都能收到新鲜资讯！** 📰✨
